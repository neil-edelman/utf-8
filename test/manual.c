/** @std C11 */
#include <inttypes.h>

/*->*/
static const uint32_t utf32_word_edges[] = {
	/* 6 code-points. */
	0x30, 0x3a, 0x41, 0x5b, 0x61, 0x7b,
	/* 56 code-points. */
	0xaac2, 0xabc2, 0xb5c2, 0xb6c2, 0xbac2, 0xbbc2, 0x80c3, 0x97c3, 0x98c3,
	0xb7c3, 0xb8c3, 0xb0ca, 0xb0cd, 0xb4cd, 0xb6cd, 0xbacd, 0xbbcd, 0xbecd,
	0xbfcd, 0x84ce, 0x86ce, 0x87ce, 0x88ce, 0xb6cf, 0xb7cf, 0x82d2, 0x8ad2,
	0x99d5, 0xa0d5, 0x89d6, 0x90d7, 0xb3d7, 0xa0d8, 0x80d9, 0x81d9, 0x8bd9,
	0xa0d9, 0xaad9, 0xaed9, 0xb0d9, 0xb1d9, 0x94db, 0x95db, 0x96db, 0xaedb,
	0xbddb, 0xbfdb, 0x80dc, 0x90dc, 0x91dc, 0x92dc, 0xb0dc, 0x8ddd, 0xa6de,
	0xb1de, 0xabdf,
	/* 406 code-points. */
	0x80a0e0, 0x96a0e0, 0x80a1e0, 0x99a1e0, 0xa0a1e0, 0x88a2e0, 0x89a2e0,
	0x90a2e0, 0xa0a2e0, 0x89a3e0, 0x84a4e0, 0xbaa4e0, 0xbda4e0, 0xbea4e0,
	0x90a5e0, 0x91a5e0, 0x98a5e0, 0xa2a5e0, 0xa6a5e0, 0xb0a5e0, 0xb2a5e0,
	0x81a6e0, 0x85a6e0, 0xbca6e0, 0xbda6e0, 0xbea6e0, 0x8ea7e0, 0x97a7e0,
	0x9ca7e0, 0xa2a7e0, 0xa6a7e0, 0xb2a7e0, 0xbca7e0, 0xbda7e0, 0x85a8e0,
	0xbca8e0, 0x99a9e0, 0xb0a9e0, 0xb2a9e0, 0xb5a9e0, 0x85aae0, 0xbcaae0,
	0xbdaae0, 0xbeaae0, 0x90abe0, 0xa2abe0, 0xa6abe0, 0xb0abe0, 0xb9abe0,
	0xbaabe0, 0x85ace0, 0xbcace0, 0xbdace0, 0xbeace0, 0x9cade0, 0xa2ade0,
	0xa6ade0, 0xb0ade0, 0xb1ade0, 0xb2ade0, 0x83aee0, 0xbeaee0, 0x90afe0,
	0x97afe0, 0xa6afe0, 0xb0afe0, 0x85b0e0, 0xbcb0e0, 0xbdb0e0, 0xbeb0e0,
	0x98b1e0, 0xa2b1e0, 0xa6b1e0, 0xb7b1e0, 0x80b2e0, 0x81b2e0, 0x85b2e0,
	0xbcb2e0, 0xbdb2e0, 0xbeb2e0, 0x9db3e0, 0xa2b3e0, 0xa6b3e0, 0xb3b3e0,
	0x84b4e0, 0xbbb4e0, 0xbdb4e0, 0xbeb4e0, 0x8eb5e0, 0x8fb5e0, 0x94b5e0,
	0x97b5e0, 0x9fb5e0, 0xa2b5e0, 0xa6b5e0, 0xb0b5e0, 0xbab5e0, 0x81b6e0,
	0x85b6e0, 0x8ab7e0, 0xa6b7e0, 0xb2b7e0, 0x81b8e0, 0xb1b8e0, 0xb2b8e0,
	0xb4b8e0, 0x80b9e0, 0x86b9e0, 0x90b9e0, 0x9ab9e0, 0x81bae0, 0xb1bae0,
	0xb2bae0, 0xb4bae0, 0xbdbae0, 0x86bbe0, 0x90bbe0, 0x81bce0, 0xa0bce0,
	0xaabce0, 0x80bde0, 0xb1bde0, 0x88bee0, 0x8dbee0, 0x8080e1, 0xab80e1,
	0xbf80e1, 0x8a81e1, 0x9081e1, 0x9681e1, 0x9a81e1, 0x9e81e1, 0xa181e1,
	0xa281e1, 0xa581e1, 0xa781e1, 0xae81e1, 0xb181e1, 0xb581e1, 0x8282e1,
	0x8e82e1, 0x8f82e1, 0x9082e1, 0x9a82e1, 0xa082e1, 0xbb83e1, 0xbd83e1,
	0x9d8de1, 0x808ee1, 0x908ee1, 0xa08ee1, 0x8090e1, 0x8190e1, 0xad99e1,
	0xaf99e1, 0x809ae1, 0x819ae1, 0x9b9ae1, 0xa09ae1, 0xab9be1, 0xb19be1,
	0x929ce1, 0x9f9ce1, 0xb29ce1, 0x809de1, 0x929de1, 0xa09de1, 0xb29de1,
	0x809ee1, 0xb49ee1, 0x9c9fe1, 0x9d9fe1, 0xa09fe1, 0xb09fe1, 0x90a0e1,
	0x83a1e1, 0x84a1e1, 0x85a2e1, 0x87a2e1, 0xa9a2e1, 0xaaa2e1, 0xa0a4e1,
	0x86a5e1, 0x9aa7e1, 0x80a8e1, 0x97a8e1, 0xa0a8e1, 0x95a9e1, 0x80aae1,
	0xa0aae1, 0x85ace1, 0xb4ace1, 0x85ade1, 0x8eade1, 0x90ade1, 0x9aade1,
	0x83aee1, 0xa1aee1, 0xaeaee1, 0xa6afe1, 0x80b0e1, 0xa4b0e1, 0x80b1e1,
	0xb8b1e1, 0x80b2e1, 0x80b3e1, 0xa9b3e1, 0xadb3e1, 0xaeb3e1, 0xb4b3e1,
	0xb5b3e1, 0xb7b3e1, 0xbab3e1, 0xacb4e1, 0xabb5e1, 0xb8b5e1, 0xb9b5e1,
	0x9bb6e1, 0x80b8e1, 0xbdbee1, 0xbebee1, 0xbfbee1, 0x82bfe1, 0x8dbfe1,
	0x90bfe1, 0x9dbfe1, 0xa0bfe1, 0xadbfe1, 0xb2bfe1, 0xbdbfe1, 0x8284e2,
	0x8384e2, 0x8784e2, 0x8884e2, 0x8a84e2, 0x9484e2, 0x9584e2, 0x9684e2,
	0x9984e2, 0x9e84e2, 0xa484e2, 0xa584e2, 0xa684e2, 0xa784e2, 0xa884e2,
	0xa984e2, 0xaa84e2, 0xae84e2, 0xaf84e2, 0xba84e2, 0xbc84e2, 0x8085e2,
	0x8585e2, 0x8a85e2, 0x8e85e2, 0x8f85e2, 0x8386e2, 0x8586e2, 0x80b0e2,
	0xbcb1e2, 0xbeb1e2, 0xa5b3e2, 0xabb3e2, 0xafb3e2, 0xb2b3e2, 0xb9b3e2,
	0x80b4e2, 0xafb5e2, 0x80b6e2, 0xa0b7e2, 0x8680e3, 0x8780e3, 0xbc80e3,
	0xbd80e3, 0x8181e3, 0x9982e3, 0x9f82e3, 0xa082e3, 0xa182e3, 0xbb83e3,
	0xbf83e3, 0x9086e3, 0xa086e3, 0x8087e3, 0xb087e3, 0x8088e3, 0x8090e3,
	0x80b7e4, 0x80b8e4, 0x9580ea, 0x9680ea, 0x9092ea, 0x9093ea, 0xb893ea,
	0x8094ea, 0x8c98ea, 0x9098ea, 0xaf99ea, 0x809aea, 0x9c9aea, 0xa09aea,
	0xa69bea, 0xa29cea, 0xb09dea, 0xb19dea, 0x889eea, 0x8b9eea, 0xb29fea,
	0xb59fea, 0xb89fea, 0xba9fea, 0x82a0ea, 0x83a0ea, 0x86a0ea, 0x87a0ea,
	0x8ba0ea, 0x8ca0ea, 0xa3a0ea, 0x80a1ea, 0xb4a1ea, 0x82a2ea, 0xb4a2ea,
	0x90a3ea, 0xa0a3ea, 0xb2a3ea, 0xb8a3ea, 0xbba3ea, 0xbca3ea, 0xbda3ea,
	0xbfa3ea, 0x80a4ea, 0xa6a4ea, 0xb0a4ea, 0x87a5ea, 0xa0a5ea, 0x80a6ea,
	0x84a6ea, 0xb3a6ea, 0x90a7ea, 0x9ea7ea, 0xa0a7ea, 0xa5a7ea, 0xa7a7ea,
	0xa9a8ea, 0x80a9ea, 0x83a9ea, 0x84a9ea, 0x8ca9ea, 0x90a9ea, 0x9ca9ea,
	0xa0a9ea, 0xb0a9ea, 0xb1a9ea, 0xb7a9ea, 0xbaa9ea, 0xbba9ea, 0xbea9ea,
	0xb0aaea, 0xb1aaea, 0xb2aaea, 0xb5aaea, 0xb7aaea, 0xb9aaea, 0xbeaaea,
	0x80abea, 0x81abea, 0x82abea, 0x9dabea, 0xa0abea, 0xababea, 0xb2abea,
	0xb3abea, 0x81acea, 0x9badea, 0xa0adea, 0xa9adea, 0xb0adea, 0xa3afea,
	0xb0afea, 0x80a0ed, 0x80a4ef, 0x9eacef, 0x9facef, 0xa9acef, 0xaaacef,
	0xb2aeef, 0x93afef, 0xbeb4ef, 0x90b5ef, 0x8fb7ef, 0xb0b7ef, 0xbcb7ef,
	0xb0b9ef, 0xbfbbef, 0x90bcef, 0x9abcef, 0xa1bcef, 0xbbbcef, 0x81bdef,
	0x9bbdef, 0xa6bdef, 0xb0bdef, 0xb1bdef, 0x9ebeef, 0xa0beef, 0xa0bfef,
	/* 300 code-points. */
	0x808090f0, 0x808490f0, 0x808a90f0, 0xa08b90f0, 0x808c90f0, 0xa08c90f0,
	0xad8c90f0, 0x818d90f0, 0x828d90f0, 0x8a8d90f0, 0x908d90f0, 0xb68d90f0,
	0x808e90f0, 0x9f8e90f0, 0xa08e90f0, 0x908f90f0, 0x809090f0, 0xaf9590f0,
	0xb09590f0, 0x809e90f0, 0x80a090f0, 0x97a190f0, 0xa0a190f0, 0xb7a190f0,
	0x80a290f0, 0xa7a290f0, 0xa0a390f0, 0xbba390f0, 0x80a490f0, 0x96a490f0,
	0xa0a490f0, 0xbfa490f0, 0x80a690f0, 0xbca690f0, 0xbea690f0, 0x80a790f0,
	0x80a890f0, 0x81a890f0, 0x90a890f0, 0xb8a890f0, 0xa0a990f0, 0xbda990f0,
	0x80aa90f0, 0x9daa90f0, 0x80ab90f0, 0x88ab90f0, 0x89ab90f0, 0xa5ab90f0,
	0x80ac90f0, 0xb9ac90f0, 0x80ad90f0, 0x98ad90f0, 0xa0ad90f0, 0xb8ad90f0,
	0x80ae90f0, 0x99ae90f0, 0x80b090f0, 0xbab390f0, 0x80b490f0, 0xa4b490f0,
	0xb0b490f0, 0x8eb590f0, 0x8fb590f0, 0xa9b590f0, 0xb0b590f0, 0x8eb690f0,
	0x80ba90f0, 0xabba90f0, 0xb0ba90f0, 0xbcbb90f0, 0x80bc90f0, 0x9dbc90f0,
	0xa7bc90f0, 0x86bd90f0, 0xb0bd90f0, 0x82be90f0, 0xb0be90f0, 0x85bf90f0,
	0xa0bf90f0, 0x808091f0, 0x838091f0, 0xb88091f0, 0xa68191f0, 0xb08191f0,
	0xb18191f0, 0xb38191f0, 0xb58191f0, 0xbf8191f0, 0x838291f0, 0xb08291f0,
	0x908391f0, 0x808491f0, 0x838491f0, 0xa78491f0, 0xb68491f0, 0x808591f0,
	0x848591f0, 0x858591f0, 0x878591f0, 0xb38591f0, 0xb68591f0, 0x808691f0,
	0x838691f0, 0xb38691f0, 0x818791f0, 0x858791f0, 0x908791f0, 0x9b8791f0,
	0x9c8791f0, 0x9d8791f0, 0x808891f0, 0xac8891f0, 0xbf8891f0, 0x818991f0,
	0x808a91f0, 0xa98a91f0, 0xb08a91f0, 0x9f8b91f0, 0xb08b91f0, 0x808c91f0,
	0x858c91f0, 0xbb8c91f0, 0xbd8c91f0, 0xbe8c91f0, 0x908d91f0, 0x978d91f0,
	0x9d8d91f0, 0xa28d91f0, 0x808e91f0, 0xb88e91f0, 0x918f91f0, 0x928f91f0,
	0x938f91f0, 0x948f91f0, 0x809091f0, 0xb59091f0, 0x879191f0, 0x8b9191f0,
	0x909191f0, 0x9a9191f0, 0x9f9191f0, 0xb09291f0, 0x849391f0, 0x869391f0,
	0x879391f0, 0xaf9691f0, 0x989791f0, 0x9c9791f0, 0x809891f0, 0xb09891f0,
	0x849991f0, 0xa09991f0, 0x809a91f0, 0xab9a91f0, 0xb89a91f0, 0xb99a91f0,
	0x809b91f0, 0x9d9c91f0, 0xb09c91f0, 0xba9c91f0, 0x809d91f0, 0xaca091f0,
	0xa0a291f0, 0xaaa391f0, 0xbfa391f0, 0xb0a491f0, 0xbfa491f0, 0x80a591f0,
	0x81a591f0, 0x82a591f0, 0x90a591f0, 0x91a791f0, 0xa1a791f0, 0xa2a791f0,
	0xa3a791f0, 0xa4a791f0, 0x80a891f0, 0x81a891f0, 0x8ba891f0, 0xb3a891f0,
	0xbaa891f0, 0xbba891f0, 0x90a991f0, 0x91a991f0, 0x9ca991f0, 0x8aaa91f0,
	0x9daa91f0, 0x9eaa91f0, 0xb0aa91f0, 0x80ac91f0, 0x80af91f0, 0xa1af91f0,
	0xb0af91f0, 0xafb091f0, 0x80b191f0, 0x81b191f0, 0x90b191f0, 0x9ab191f0,
	0xb2b191f0, 0x92b291f0, 0x80b491f0, 0xb1b491f0, 0x86b591f0, 0x87b591f0,
	0x90b591f0, 0x8ab691f0, 0x98b691f0, 0xb3bb91f0, 0x82bc91f0, 0x83bc91f0,
	0x84bc91f0, 0xb4bc91f0, 0x90bd91f0, 0x9abd91f0, 0xb0be91f0, 0x80bf91f0,
	0x808092f0, 0x809092f0, 0x809292f0, 0xb1bf92f0, 0x808093f0, 0xb09093f0,
	0x819193f0, 0x879193f0, 0xa09193f0, 0x9e8496f0, 0xb08496f0, 0xaea996f0,
	0xb0a996f0, 0xb0ab96f0, 0x80ac96f0, 0xb0ac96f0, 0x90ad96f0, 0x9bad96f0,
	0xa3ad96f0, 0x80b596f0, 0x83b596f0, 0xabb596f0, 0xb0b596f0, 0x80ba96f0,
	0x80bc96f0, 0x8fbd96f0, 0x90bd96f0, 0x91bd96f0, 0x808097f0, 0xb0bf9af0,
	0x80809bf0, 0x9cb29bf0, 0xb0b39cf0, 0x80b49cf0, 0x80909df0, 0x819b9df0,
	0x829b9df0, 0x9b9b9df0, 0x9c9b9df0, 0xbb9b9df0, 0xbc9b9df0, 0x959c9df0,
	0x969c9df0, 0xb59c9df0, 0xb69c9df0, 0x8f9d9df0, 0x909d9df0, 0xaf9d9df0,
	0xb09d9df0, 0x899e9df0, 0x8a9e9df0, 0xa99e9df0, 0xaa9e9df0, 0x839f9df0,
	0x849f9df0, 0x80a09df0, 0x80bc9df0, 0x80809ef0, 0x80849ef0, 0xb0849ef0,
	0x80859ef0, 0x8f859ef0, 0x908a9ef0, 0xae8a9ef0, 0x808b9ef0, 0xac8b9ef0,
	0xb08b9ef0, 0xbf8b9ef0, 0x90939ef0, 0xab939ef0, 0xb0939ef0, 0xae979ef0,
	0xb0979ef0, 0xbf979ef0, 0xa09f9ef0, 0x87a39ef0, 0x80a49ef0, 0x84a59ef0,
	0x90a59ef0, 0x9ea59ef0, 0x80b89ef0, 0xb0bb9ef0, 0xb0af9ff0, 0x8180a0f3
};
static const uint32_t utf32_word_byte_end[] = { 6, 62, 468, 768 };
/*<-*/

static size_t upper_bound(
	const uint32_t *const table,
	size_t lo, size_t hi,
	const uint32_t key) {
	size_t count = hi - lo;
	while(count) {
		size_t step = count / 2;
		if((key >= table[lo + step])) lo = step + 1, count -= step + 1;
		else count = step;
	}
	return lo;
}

#include <stdbool.h>

/*static bool is_word_advance(const char **const utf8_ptr) {
}*/

static bool is_word(const char *const codepoint) {
	/*static const char words[] = { '0', ':', 'A', '[', 'a', '{' };*/
	return upper_bound(utf32_word_edges, 0, utf32_word_byte_end[0],
		(uint32_t)(uint8_t)*codepoint) & 1;
}

#include <stdio.h>
#include <assert.h>

int main(void) {
	struct test {
		const char *codepoint;
		bool is_word;
	} test[] = {
		{ "a", true },
		{ "_", false },
		{ "Ã ", true }
	};
	for(struct test *i = test, *const i_end = test + sizeof test / sizeof *test;
		i < i_end; i++) {
		bool is = is_word(i->codepoint);
		printf("Testing whether \"%s\" is%s a code point in a word: it is%s.\n",
			i->codepoint, i->is_word ? "" : " not", is ? "" : " not");
		assert(i->is_word == is);
	}
}
